# 1. ip地址 && 子网掩码

- 为什么需要子网掩码，它可以确定是否是一个网段，区分不同网段，通过子网掩码，我们可以更好的利用ip地址，减少地址浪费，这就说到了子网划分，将网络号后移来达到这个效果，此外，也可以向前移，这就是超网的概念，就是说当ip地址不够分的时候，通过子网掩码向前移动来扩大网络部分（就是合并两个连续的网段），从而让它可以不用通过路由器来到达目标ip地址，当然也不是任何连续的网段都可以合并

  另外， 不能通过子网掩码来确定是哪一类网络，因为上面说的很清楚，有子网划分和超网， 所以应该通过前面的网络号来区分



---



# 2. 静态路由 &&  动态路由

作用： 为数据包选择路径，

---



# 3. 网络层协议



## ICMP协议详解

ICMP，全称是 Internet Control Message Protocol，即互联网控制报文协议，所谓控制，就是通过下发指令来感知和控制网络环境，所以它一定是配合一个无法感知网络环境的协议来工作的，这个协议就是 IP(包括 IPv4 和 IPv6)。

ICMP用于告知网络包传送过程中产生的错误以及各种控制消息

所以，ICMP 通常被认为是 IP 协议的一部分，它封装在 IP 层中，使用 IP 协议进行传输。因此，严格来说，ICMP 既不是一个网络层协议，也不是一个传输层协议，而是介于两者之间的一个协议。

它的主要功能是传输网络诊断信息，信息主要包括两类：

> 一类是 查询类报文 ：主要用于信息的查询和采集，比如采集传输路径上的每个路由器都是谁，本次传输的报文是否达到目的地等等。
> 另一类是 差错诊断类报文 ：主要用于诊断网络故障，比如传输报文被丢弃的原因是什么等等。

一个新搭建好的网络，往往需要先进行一个简单的测试，来验证网络是否畅通；但是IP协议并不提供可靠传输。如果丢包了，IP协议并不能通知传输层是否丢包以及丢包的原因。
所以我们就需要一种协议来完成这样的功能–ICMP协议。



## 为啥需要 ICMP
我们都知道，IP 协议是一个不可靠协议，如果 IP 包在传输过程中出现错误，比如 checksum 对不上，拥塞，超时等等，那么 IP 包是会直接被丢弃的，之后也不会有进一步的努力来修正。

这是 IP 协议的一个设计准则决定的，也就是 best effort，尽力而为，这样的好处是让 IP 协议尽量保持简单的形态，只负责有效率的数据传输，而更多的质量控制交给高层的协议去处理(比如 TCP)。

但高层能提供质量控制的协议毕竟在少数，所以就需要在下层有协议来辅助 IP 完成必要的网络质量管理。ICMP 协议自然就被提出来了。

通过 ICMP 协议，当 IP 包发生错误的时候，上层发送 IP 包的主机或路由器并不知道下层发生了错误，这个时候，下层的主机或路由器就可以通过发送 ICMP 包，将错误信息汇报给上层，从而让上层的主机或路由器进行调整。

不过需要注意的是，ICMP 仅仅只能提供某些特定类型的错误信息汇报，并不能帮助 IP 协议成为可靠的协议。它能做的事还是有限，但用于基本的网络质量管理是足够了。


## ICMP协议的功能
ICMP协议的功能主要有：

1. 确认IP包是否成功到达目标地址
2. 通知在发送过程中IP包被丢弃的原因







## ARP

ARP（Address  Resolution  Protocol）是一种解决地址问题的协议。以目标IP地址为线索，用来定位下一个应该接收数据分包的网络设备对应的MAC地址。如果目标主机不在同一个链路上时，可以通过ARP查找下一跳路由器的MAC地址。不过ARP只适用于IPv4，不能用于IPv6。IPv6中可以用ICMPv6替代ARP发送邻居探索消息（请参考5.4.4节中的邻居探索。）。



## IGMP

IGMP（MLD）主要有两大作用：1. 向路由器表明想要接收多播消息（并通知想接收多播的地址）。2. 向交换集线器通知想要接收多播的地址。



